{% extends "base.html" %} {% block title %}Admin Dashboard - Community
Platform{% endblock %} {% block content %}
<div
  class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom"
>
  <h1 class="h2"><i class="fas fa-tachometer-alt"></i> Admin Dashboard</h1>
</div>

<!-- Statistics Cards -->
<div class="row mb-4">
  <div class="col-xl-3 col-md-6 mb-4">
    <div class="card border-left-primary shadow h-100 py-2">
      <div class="card-body">
        <div class="row no-gutters align-items-center">
          <div class="col mr-2">
            <div
              class="text-xs font-weight-bold text-primary text-uppercase mb-1"
            >
              Total Users
            </div>
            <div class="h5 mb-0 font-weight-bold text-gray-800">
              {{ stats.total_users }}
            </div>
          </div>
          <div class="col-auto">
            <i class="fas fa-users fa-2x text-gray-300"></i>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="col-xl-3 col-md-6 mb-4">
    <div class="card border-left-success shadow h-100 py-2">
      <div class="card-body">
        <div class="row no-gutters align-items-center">
          <div class="col mr-2">
            <div
              class="text-xs font-weight-bold text-success text-uppercase mb-1"
            >
              Total Posts
            </div>
            <div class="h5 mb-0 font-weight-bold text-gray-800">
              {{ stats.total_posts }}
            </div>
          </div>
          <div class="col-auto">
            <i class="fas fa-newspaper fa-2x text-gray-300"></i>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="col-xl-3 col-md-6 mb-4">
    <div class="card border-left-info shadow h-100 py-2">
      <div class="card-body">
        <div class="row no-gutters align-items-center">
          <div class="col mr-2">
            <div class="text-xs font-weight-bold text-info text-uppercase mb-1">
              Total Comments
            </div>
            <div class="h5 mb-0 font-weight-bold text-gray-800">
              {{ stats.total_comments }}
            </div>
          </div>
          <div class="col-auto">
            <i class="fas fa-comments fa-2x text-gray-300"></i>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="col-xl-3 col-md-6 mb-4">
    <div class="card border-left-warning shadow h-100 py-2">
      <div class="card-body">
        <div class="row no-gutters align-items-center">
          <div class="col mr-2">
            <div
              class="text-xs font-weight-bold text-warning text-uppercase mb-1"
            >
              Media Files
            </div>
            <div class="h5 mb-0 font-weight-bold text-gray-800">
              {{ stats.total_media }}
            </div>
          </div>
          <div class="col-auto">
            <i class="fas fa-file-image fa-2x text-gray-300"></i>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Growth Statistics -->
<div class="row mb-4">
  <div class="col-lg-6">
    <div class="card shadow mb-4">
      <div class="card-header py-3">
        <h6 class="m-0 font-weight-bold text-primary">30-Day Growth</h6>
      </div>
      <div class="card-body">
        <div class="row">
          <div class="col-6 text-center">
            <h4 class="text-success">{{ stats.new_users_30d }}</h4>
            <small class="text-muted">New Users</small>
          </div>
          <div class="col-6 text-center">
            <h4 class="text-info">{{ stats.new_posts_30d }}</h4>
            <small class="text-muted">New Posts</small>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="col-lg-6">
    <div class="card shadow mb-4">
      <div class="card-header py-3">
        <h6 class="m-0 font-weight-bold text-primary">Storage Usage</h6>
      </div>
      <div class="card-body">
        <div class="text-center">
          <h4 class="text-warning">{{ stats.total_storage_mb }} MB</h4>
          <small class="text-muted">Total Storage Used</small>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Recent Activity -->
<div class="row">
  <div class="col-lg-4">
    <div class="card shadow mb-4">
      <div class="card-header py-3">
        <h6 class="m-0 font-weight-bold text-primary">Recent Users</h6>
      </div>
      <div class="card-body">
        {% if recent_users %} {% for user in recent_users %}
        <div class="d-flex align-items-center mb-2">
          <div class="mr-3">
            {% if user.avatar_url %}
            <img
              src="{{ user.avatar_url }}"
              class="rounded-circle"
              width="40"
              height="40"
              alt="Avatar"
            />
            {% else %}
            <div
              class="bg-primary rounded-circle d-flex align-items-center justify-content-center"
              style="width: 40px; height: 40px"
            >
              <i class="fas fa-user text-white"></i>
            </div>
            {% endif %}
          </div>
          <div>
            <div class="font-weight-bold">{{ user.get_full_name() }}</div>
            <small class="text-muted">@{{ user.username }}</small>
          </div>
        </div>
        {% endfor %} {% else %}
        <p class="text-muted">No recent users</p>
        {% endif %}
      </div>
    </div>
  </div>

  <div class="col-lg-4">
    <div class="card shadow mb-4">
      <div class="card-header py-3">
        <h6 class="m-0 font-weight-bold text-primary">Recent Posts</h6>
      </div>
      <div class="card-body">
        {% if recent_posts %} {% for post in recent_posts %}
        <div class="mb-3">
          <h6>
            <a
              href="{{ url_for('main.blog_detail', id=post.id) }}"
              class="text-decoration-none"
              >{{ post.title }}</a
            >
          </h6>
          <small class="text-muted">by {{ post.author.get_full_name() }}</small>
        </div>
        {% endfor %} {% else %}
        <p class="text-muted">No recent posts</p>
        {% endif %}
      </div>
    </div>
  </div>

  <div class="col-lg-4">
    <div class="card shadow mb-4">
      <div class="card-header py-3">
        <h6 class="m-0 font-weight-bold text-primary">Recent Comments</h6>
      </div>
      <div class="card-body">
        {% if recent_comments %} {% for comment in recent_comments %}
        <div class="mb-3">
          <p class="mb-1">
            {{ comment.content[:50] }}{% if comment.content|length > 50 %}...{%
            endif %}
          </p>
          <small class="text-muted"
            >by {{ comment.author.get_full_name() }}</small
          >
        </div>
        {% endfor %} {% else %}
        <p class="text-muted">No recent comments</p>
        {% endif %}
      </div>
    </div>
  </div>
</div>

<!-- Quick Actions -->
<div class="row">
  <div class="col-12">
    <div class="card shadow mb-4">
      <div class="card-header py-3">
        <h6 class="m-0 font-weight-bold text-primary">Quick Actions</h6>
      </div>
      <div class="card-body">
        <div class="row">
          <div class="col-md-3 mb-2">
            <a
              href="{{ url_for('admin.manage_users') }}"
              class="btn btn-primary btn-block"
            >
              <i class="fas fa-users"></i> Manage Users
            </a>
          </div>
          <div class="col-md-3 mb-2">
            <a
              href="{{ url_for('admin.manage_posts') }}"
              class="btn btn-success btn-block"
            >
              <i class="fas fa-newspaper"></i> Manage Posts
            </a>
          </div>
          <div class="col-md-3 mb-2">
            <a
              href="{{ url_for('admin.manage_comments') }}"
              class="btn btn-info btn-block"
            >
              <i class="fas fa-comments"></i> Manage Comments
            </a>
          </div>
          <div class="col-md-3 mb-2">
            <a
              href="{{ url_for('admin.manage_media') }}"
              class="btn btn-warning btn-block"
            >
              <i class="fas fa-file-image"></i> Manage Media
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
  .border-left-primary {
    border-left: 0.25rem solid #4e73df !important;
  }
  .border-left-success {
    border-left: 0.25rem solid #1cc88a !important;
  }
  .border-left-info {
    border-left: 0.25rem solid #36b9cc !important;
  }
  .border-left-warning {
    border-left: 0.25rem solid #f6c23e !important;
  }
</style>
{% endblock %}
